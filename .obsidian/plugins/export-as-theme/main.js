/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var N=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var me=Object.getOwnPropertyNames;var pe=Object.prototype.hasOwnProperty;var ue=(n,o)=>{for(var t in o)N(n,t,{get:o[t],enumerable:!0})},ge=(n,o,t,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of me(o))!pe.call(n,i)&&i!==t&&N(n,i,{get:()=>o[i],enumerable:!(r=le(o,i))||r.enumerable});return n};var he=n=>ge(N({},"__esModule",{value:!0}),n);var we={};ue(we,{default:()=>B});module.exports=he(we);var ae=require("obsidian");var re={enabled:!0,marginSize:"2cm",pageSize:"A4"};function e(n,o=""){if(typeof document=="undefined")return o;let t=document.documentElement,r=getComputedStyle(t).getPropertyValue(n).trim();if(!r&&document.body&&(r=getComputedStyle(document.body).getPropertyValue(n).trim()),!r){let i=document.querySelector(".markdown-preview-view");i&&(r=getComputedStyle(i).getPropertyValue(n).trim())}return r||o}function y(n,o=5){if(!n||typeof window=="undefined"||o<=0)return"";try{let r=window.getComputedStyle(n).backgroundColor;if(r&&r!=="transparent"&&r!=="rgba(0, 0, 0, 0)"&&r!=="initial")return r;let i=n.parentElement;if(i)return y(i,o-1)}catch(t){}return""}function z(n){if(!n||typeof window=="undefined")return"";try{return window.getComputedStyle(n).color||""}catch(o){}return""}function P(n,o){if(!n||typeof window=="undefined")return"";try{return window.getComputedStyle(n).getPropertyValue(o).trim()||""}catch(t){return""}}function ne(n){if(!n||typeof window=="undefined")return!1;try{let o=window.getComputedStyle(n),t=o.borderBottomWidth,r=o.borderBottomColor,i=o.borderBottomStyle,l=Boolean(t&&t!=="0px"&&i!=="none"&&r!=="transparent"&&r!=="rgba(0, 0, 0, 0)");try{let d=window.getComputedStyle(n,"::after"),q=Boolean(d.content&&d.content!=="none"&&d.content!=='""'&&d.content!=="normal"),h=d.display!=="none",w=Boolean(d.height&&d.height!=="0px");return l||q&&h&&w}catch(d){return l}}catch(o){return!1}}function ie(n){let o="",t="",r=document.querySelector(".markdown-preview-view"),i=document.querySelector(".markdown-preview-section"),l=document.querySelector(".view-content"),d=document.body,q=document.querySelector(".workspace"),h=[i,r,l,d,q].filter(Boolean),w=document.querySelector(".markdown-preview-view .markdown-preview-section")||document.querySelector(".markdown-preview-view")||document.querySelector(".view-content");w&&!h.includes(w)&&h.unshift(w);for(let u of h)if(o||(o=y(u)),t||(t=z(u)),o&&t)break;if(!o){let u=document.querySelector(".markdown-preview-view p")||document.querySelector("p");u&&(o=y(u),t=t||z(u))}let a=e("--background-primary","")||e("--background-primary-alt","")||e("--app-background","")||e("--bg-primary","")||e("--background-modifier-form-field","")||e("--background-modifier-cover","");o?a=o:a||(a="#ffffff");let b=e("--background-secondary","")||e("--background-secondary-alt","")||e("--bg-secondary","")||a,s=e("--text-normal","")||e("--text-primary","")||e("--text","")||e("--text-default","");t?s=t:s||(s="#000000");let R=e("--text-faint","")||e("--text-secondary","")||e("--text-muted","")||"#666666",c=e("--text-accent","")||e("--accent","")||e("--color-accent","")||"#0066cc",H=e("--text-sub-accent","")||e("--accent-2","")||c,U=e("--text-dim","")||"#999999",x=e("--text-title-h1","")||e("--h1-color","")||e("--heading-color","")||e("--text-accent","")||c,m=e("--text-title-h2","")||e("--h2-color","")||e("--heading-color","")||s,$=e("--text-title-h3","")||e("--h3-color","")||m,f=e("--text-a","")||e("--link-color","")||e("--link-color-external","")||c,D=e("--text-a-hover","")||e("--link-color-hover","")||f,v=e("--interactive-accent","")||e("--interactive-accent-rgb","")||c,I=e("--interactive-accent-hover","")||v,F=e("--blockquote-border","")||e("--blockquote-border-color","")||c,G=e("--tag-background","")||e("--tag-bg","")||"rgba(0, 0, 0, 0.1)",V=e("--background-modifier-border","")||e("--border-color","")||"rgba(0, 0, 0, 0.1)",S=e("--table-border-color","")||e("--table-border","")||V,j=e("--text-highlight-bg","")||e("--highlight-bg","")||"rgba(255, 255, 0, 0.3)",T=e("--font-family-preview","")||e("--font-text","")||"system-ui, sans-serif",W=e("--code-background","")||e("--code-bg","")||b,_=e("--code-color","")||e("--code-text","")||s,J=e("--code-border-radius","")||"0.3rem",L=e("--text-bold",c),K=e("--text-strong",L),Q=K!==c?K:L!==c?L:c,k=a.toLowerCase(),se=k.startsWith("#")?parseInt(k.slice(1),16)<8421504:k.includes("rgb")&&k.includes("0,")&&k.includes("0,"),be=document.querySelector("table"),E=document.querySelector("th"),C=document.querySelector("td"),X=E?y(E):b,Y=E?z(E):c,de=C?y(C):a,ce=C?z(C):s,p=document.querySelector(".markdown-preview-view p")||document.querySelector("p"),O=p?P(p,"font-size"):"",M=p?P(p,"line-height"):"",Z=p?P(p,"letter-spacing"):"",ee=p?P(p,"font-family"):T,te=document.querySelector("h1"),oe=document.querySelector("h2"),fe=te?ne(te):oe?ne(oe):!1;return console.log("[Export as Theme] Background:",a,"Text:",s,"Actual BG:",o,"Actual Text:",t),console.log("[Export as Theme] Table Header BG:",X,"Table Header Text:",Y),console.log("[Export as Theme] Font:",ee,"Size:",O,"Line Height:",M),`
@media print {
	/* --- Page and Margin Overrides --- */
	/* Use very high specificity to override Obsidian defaults */
	html, body, html body {
		margin: 0 !important;
		padding: 0 !important;
		background-color: ${a} !important;
		color: ${s} !important;
		font-family: ${ee||T} !important;
		${O?`font-size: ${O} !important;`:""}
		${M?`line-height: ${M} !important;`:""}
		${Z?`letter-spacing: ${Z} !important;`:""}
		-webkit-print-color-adjust: exact !important;
		print-color-adjust: exact !important;
	}

	@page {
		size: ${n.pageSize};
		margin: 0 !important;
		background-color: ${a};
	}

	/* Simulated margins inside the page */
	body {
		padding: ${n.marginSize};
		line-height: 1.6;
	}

	/* --- Base Theme Variables --- */
	:root {
		--background-primary: ${a};
		--background-secondary: ${b};
		--text-normal: ${s};
		--text-faint: ${R};
		--text-accent: ${c};
		--text-sub-accent: ${H};
		--text-dim: ${U};
		--text-title-h1: ${x};
		--text-title-h2: ${m};
		--text-title-h3: ${$};
		--text-a: ${f};
		--text-a-hover: ${D};
		--interactive-accent: ${v};
		--interactive-accent-hover: ${I};
		--blockquote-border: ${F};
		--tag-background: ${G};
		--background-modifier-border: ${V};
		--table-border-color: ${S};
		--text-highlight-bg: ${j};
		--font-family-preview: ${T};
		--code-background: ${W};
		--code-color: ${_};
		--code-border-radius: ${J};
		color-scheme: ${se?"dark":"light"};
	}

	body {
		--background-primary: ${a};
		--background-secondary: ${b};
		--text-normal: ${s};
		--text-faint: ${R};
		--text-accent: ${c};
		--text-sub-accent: ${H};
		--text-dim: ${U};
		--text-title-h1: ${x};
		--text-title-h2: ${m};
		--text-title-h3: ${$};
		--text-a: ${f};
		--text-a-hover: ${D};
		--interactive-accent: ${v};
		--interactive-accent-hover: ${I};
		--blockquote-border: ${F};
		--tag-background: ${G};
		--background-modifier-border: ${V};
		--table-border-color: ${S};
		--text-highlight-bg: ${j};
		--font-family-preview: ${T};
		--code-background: ${W};
		--code-color: ${_};
		--code-border-radius: ${J};
		background-color: ${a} !important;
		color: ${s} !important;
	}

	/* --- Typography --- */
	/* Remove problematic borders/outlines but preserve ::after pseudo-elements for underlines */
	h1, h2, h3, h4, h5, h6 {
		color: ${m} !important;
		border: none !important;
		border-left: none !important;
		border-right: none !important;
		border-top: none !important;
		border-bottom: none !important;
		outline: none !important;
		box-shadow: none !important;
		text-shadow: none !important;
		background: transparent !important;
		background-image: none !important;
		padding-bottom: 0.3em;
		margin-top: 2em;
		margin-left: 0 !important;
		padding-left: 0 !important;
	}

	/* Preserve ::after pseudo-elements for header underlines - don't override content */
	h1::after, h2::after, h3::after, h4::after, h5::after, h6::after {
		/* Don't override content - let theme's ::after styles work */
		/* Only remove problematic effects */
		text-shadow: none !important;
		box-shadow: none !important;
		filter: none !important;
	}

	h1 { 
		color: ${x} !important; 
		font-size: 2.2em; 
	}
	h2 { 
		color: ${m} !important; 
		font-size: 1.8em; 
	}
	h3 { 
		color: ${$} !important; 
		font-size: 1.5em; 
	}
	h4, h5, h6 {
		color: ${m} !important;
	}

	/* Ensure all text uses theme colors */
	p, li, td, div, span {
		color: ${s} !important;
	}

	/* Bold text - use theme's bold color, remove gradients/effects for print */
	strong, b {
		font-weight: bold !important;
		color: ${Q} !important;
		background: none !important;
		background-image: none !important;
		-webkit-background-clip: unset !important;
		-webkit-text-fill-color: unset !important;
		text-shadow: none !important;
	}

	em, i {
		color: ${H} !important;
		font-style: italic !important;
	}

	mark {
		background-color: var(--text-highlight-bg);
		color: ${s};
	}

	/* --- Links --- */
	/* Remove gradients and effects, use solid colors for print */
	a {
		color: ${f} !important;
		text-decoration: none !important;
		border-bottom: 1px solid ${v} !important;
		background: none !important;
		background-image: none !important;
		background-size: unset !important;
		background-repeat: unset !important;
		text-shadow: none !important;
		box-shadow: none !important;
	}
	a:hover, a:visited, a:active {
		color: ${D} !important;
		border-bottom-color: ${I} !important;
	}

	/* --- Blockquotes --- */
	/* Simplify gradients to solid colors for print */
	blockquote {
		color: ${s} !important;
		border-left: 3px solid ${F} !important;
		border-right: none !important;
		border-top: none !important;
		border-bottom: none !important;
		background: ${b} !important;
		background-image: none !important;
		padding: 1rem 2rem;
		margin: 1.5rem 0;
		border-radius: 5px;
		box-shadow: none !important;
		text-shadow: none !important;
	}

	/* --- Code & Preformatted Blocks --- */
	code, pre {
		background-color: var(--code-background);
		color: var(--code-color);
		border-radius: var(--code-border-radius);
		padding: 0.2em 0.4em;
		font-family: 'Courier New', monospace;
	}

	pre {
		padding: 1em;
		overflow-x: auto;
		border: 1px solid var(--background-modifier-border);
	}

	/* --- Tables --- */
	table {
		border-collapse: collapse;
		border: 1px solid ${S};
		width: 100%;
	}
	th, td {
		border: 1px solid ${S};
		padding: 0.5em 1em;
	}
	th {
		color: ${Y} !important;
		background-color: ${X} !important;
	}
	td {
		color: ${ce} !important;
		background-color: ${de} !important;
	}

	/* --- Tags --- */
	a.tag {
		background-color: var(--tag-background);
		color: var(--text-accent);
		font-style: italic;
		border-radius: 0.25em;
		padding: 0.2em 0.4em;
	}

	/* --- Horizontal Rules --- */
	/* Simplify gradients to solid colors for print */
	hr {
		border: none !important;
		height: 1px !important;
		background: ${c} !important;
		background-image: none !important;
		margin: 2em 0;
		opacity: 0.5;
	}

	/* --- Page Fill Shadow Fix (bottom page bleed) --- */
	body::after {
		content: "";
		position: fixed;
		inset: 0;
		background: ${a};
		z-index: -1;
	}

	/* Remove CSS effects that don't print well, but preserve ::after/::before pseudo-elements */
	h1, h2, h3, h4, h5, h6,
	p, a, strong, b, em, i,
	blockquote, code, pre,
	table, th, td,
	.markdown-preview-view *,
	.markdown-source-view * {
		text-shadow: none !important;
		box-shadow: none !important;
		filter: none !important;
		backdrop-filter: none !important;
	}

	/* Don't remove effects from ::after and ::before pseudo-elements - they're used for underlines */
	h1::after, h2::after, h3::after, h4::after, h5::after, h6::after,
	h1::before, h2::before, h3::before, h4::before, h5::before, h6::before {
		text-shadow: none !important;
		box-shadow: none !important;
		filter: none !important;
		/* But preserve their content, display, and background for underlines */
	}

	/* Simplify gradients to solid colors for elements that commonly use them */
	strong, b, a, blockquote, hr {
		background-image: none !important;
	}

	/* Target Obsidian's markdown preview container - ensure background is applied everywhere */
	.markdown-preview-view,
	.markdown-source-view,
	.markdown-preview-section,
	.markdown-preview-view .markdown-preview-sizer,
	.markdown-preview-view .markdown-preview-sizer > div,
	.markdown-preview-view .markdown-preview-section,
	.markdown-preview-view .markdown-embed,
	.markdown-preview-view .markdown-embed-content,
	.view-content,
	.workspace-leaf-content {
		background-color: ${a} !important;
		color: ${s} !important;
		background-image: none !important;
	}

	/* Ensure body and html also have the background */
	html {
		background-color: ${a} !important;
	}

	/* Apply background to all possible containers */
	.workspace,
	.workspace-split,
	.workspace-tabs,
	.workspace-leaf,
	.workspace-leaf-content,
	.view-content,
	.markdown-reading-view {
		background-color: ${a} !important;
	}

	/* Ensure the main content area has the background */
	.markdown-preview-view .markdown-preview-section > div,
	.markdown-preview-view .markdown-preview-section > p,
	.markdown-preview-view .markdown-preview-section > * {
		background-color: transparent !important;
	}

	/* Ensure all content uses theme colors */
	.markdown-preview-view p,
	.markdown-preview-view li,
	.markdown-preview-view td,
	.markdown-preview-view div,
	.markdown-preview-view span {
		color: ${s} !important;
	}

	/* Headers in markdown preview - remove problematic borders but preserve ::after */
	.markdown-preview-view h1,
	.markdown-preview-view h2,
	.markdown-preview-view h3,
	.markdown-preview-view h4,
	.markdown-preview-view h5,
	.markdown-preview-view h6 {
		border: none !important;
		border-left: none !important;
		border-right: none !important;
		border-top: none !important;
		border-bottom: none !important;
		outline: none !important;
		box-shadow: none !important;
		text-shadow: none !important;
		background: transparent !important;
		background-image: none !important;
		margin-left: 0 !important;
		padding-left: 0 !important;
	}

	/* Preserve ::after pseudo-elements for header underlines in markdown preview */
	.markdown-preview-view h1::after,
	.markdown-preview-view h2::after,
	.markdown-preview-view h3::after,
	.markdown-preview-view h4::after,
	.markdown-preview-view h5::after,
	.markdown-preview-view h6::after {
		/* Don't override content - preserve theme's ::after styles for underlines */
		/* Only remove problematic effects */
		text-shadow: none !important;
		box-shadow: none !important;
		filter: none !important;
	}

	.markdown-preview-view h1 {
		color: ${x} !important;
		font-size: 2.2em;
	}

	.markdown-preview-view h2 {
		color: ${m} !important;
		font-size: 1.8em;
	}

	.markdown-preview-view h3 {
		color: ${$} !important;
		font-size: 1.5em;
	}

	.markdown-preview-view h4,
	.markdown-preview-view h5,
	.markdown-preview-view h6 {
		color: ${m} !important;
	}

	/* Links in markdown preview */
	.markdown-preview-view a {
		color: ${f} !important;
		background: none !important;
		background-image: none !important;
		border-bottom: 1px solid ${v} !important;
	}

	/* Bold in markdown preview */
	.markdown-preview-view strong,
	.markdown-preview-view b {
		color: ${Q} !important;
		background: none !important;
		background-image: none !important;
		-webkit-background-clip: unset !important;
		-webkit-text-fill-color: unset !important;
	}
}

.print .markdown-preview-view {
	background-color: var(--background-primary) !important;
	color: var(--text-normal) !important;
}
`}var g=require("obsidian"),A=class extends g.PluginSettingTab{constructor(t,r){super(t,r);this.plugin=r}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Export as Theme Settings"}),new g.Setting(t).setName("Enable print theme export").setDesc("When enabled, PDF exports will use your current theme's colors and styles").addToggle(r=>r.setValue(this.plugin.settings.enabled).onChange(async i=>{this.plugin.settings.enabled=i,await this.plugin.saveSettings(),this.plugin.updatePrintStyles()})),new g.Setting(t).setName("Page size").setDesc("Page size for PDF exports (e.g., A4, Letter)").addText(r=>r.setPlaceholder("A4").setValue(this.plugin.settings.pageSize).onChange(async i=>{this.plugin.settings.pageSize=i||"A4",await this.plugin.saveSettings(),this.plugin.updatePrintStyles()})),new g.Setting(t).setName("Margin size").setDesc("Margin size for PDF exports (e.g., 2cm, 1in)").addText(r=>r.setPlaceholder("2cm").setValue(this.plugin.settings.marginSize).onChange(async i=>{this.plugin.settings.marginSize=i||"2cm",await this.plugin.saveSettings(),this.plugin.updatePrintStyles()}))}};var B=class extends ae.Plugin{constructor(){super(...arguments);this.styleElement=null;this.updateTimeoutId=null}async onload(){if(await this.loadSettings(),this.updatePrintStyles(),this.registerDomEvent(document,"DOMContentLoaded",()=>{this.updatePrintStyles()}),this.registerDomEvent(window,"beforeprint",()=>{this.updatePrintStyles()}),typeof document!="undefined"){let t=new MutationObserver(()=>{this.updateTimeoutId!==null&&clearTimeout(this.updateTimeoutId),this.updateTimeoutId=window.setTimeout(()=>{this.updatePrintStyles(),this.updateTimeoutId=null},100)});t.observe(document.documentElement,{attributes:!0,attributeFilter:["class","style"],subtree:!1}),this.register(()=>{t.disconnect(),this.updateTimeoutId!==null&&(clearTimeout(this.updateTimeoutId),this.updateTimeoutId=null)})}this.addSettingTab(new A(this.app,this))}onunload(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null),this.updateTimeoutId!==null&&(clearTimeout(this.updateTimeoutId),this.updateTimeoutId=null)}updatePrintStyles(){if(!this.settings.enabled){this.styleElement&&(this.styleElement.remove(),this.styleElement=null);return}let t=this.settings.pageSize,r=this.settings.marginSize;try{let l=this.app.vault.config;if(l&&l.pdfExportSettings){let d=l.pdfExportSettings;d.pageSize&&(t=d.pageSize),d.margin&&(r=d.margin)}}catch(l){}let i=ie({...this.settings,pageSize:t,marginSize:r});this.styleElement&&this.styleElement.remove(),this.styleElement=document.createElement("style"),this.styleElement.id="obsidian-export-as-theme-print-styles",this.styleElement.textContent=i,document.head.appendChild(this.styleElement)}async loadSettings(){this.settings=Object.assign({},re,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
