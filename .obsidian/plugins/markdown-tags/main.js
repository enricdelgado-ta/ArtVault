/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var b=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var F=Object.prototype.hasOwnProperty;var O=(t,e,o)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var R=(t,e)=>{for(var o in e)b(t,o,{get:e[o],enumerable:!0})},W=(t,e,o,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of B(e))!F.call(t,s)&&s!==o&&b(t,s,{get:()=>e[s],enumerable:!(c=A(e,s))||c.enumerable});return t};var q=t=>W(b({},"__esModule",{value:!0}),t);var k=(t,e,o)=>(O(t,typeof e!="symbol"?e+"":e,o),o);var I={};R(I,{default:()=>x});module.exports=q(I);var S=require("obsidian"),f=require("@codemirror/view"),v=require("@codemirror/state");var U=["todo","planned","in-progress","doing","done","tip","on-hold","tbd","proposed","draft","wip","mvp","blocked","canceled","error","warning","warn"],P=["grey","green","yellow","orange","blue","purple","red"],H=/\(\(<?tag(?:[\|\/])(?<label>[^\|\/\)]+)(?:[\|\/](?<bgcolor>[^\|\/\)]*))?(?:[\|\/](?<fgcolor>[^\|\/\)]*))?\)\)/g,$=t=>/^#([0-9A-Fa-f]{3}){1,2}$/.test(t),m=t=>$(t)||P.includes(t.toLowerCase()),w=t=>t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e]||e);function T(t,e,o,c=!1){let s=U.includes(t.toLowerCase())?t.toLowerCase():"",u=e&&P.includes(e.toLowerCase())?e.toLowerCase():"grey",a=e&&$(e)?e:null,l=o&&$(o)?o:null,p=`bn-tags ${s} ${u} ${c?"bn-arrow-tags":""}`.trim(),n=`${a?`background-color: ${a};`:""}${l?` color: ${l};`:""}`;return f.Decoration.mark({class:p,attributes:{style:n}})}var x=class extends S.Plugin{async onload(){this.registerEditorExtension(this.editModeTagsHighlighter()),this.registerMarkdownPostProcessor(this.viewModeTagsHighlighter())}editModeTagsHighlighter(){return f.ViewPlugin.fromClass(class{constructor(e){k(this,"decorations");this.decorations=this.buildDecorations(e)}update(e){(e.docChanged||e.viewportChanged||e.selectionSet)&&(this.decorations=this.buildDecorations(e.view))}buildDecorations(e){var s,u;let o=new v.RangeSetBuilder,c=e.state.selection.main.head;for(let{from:a,to:l}of e.visibleRanges){let p=e.state.doc.sliceString(a,l),n,y=r=>{let d=e.state.doc.lineAt(r),g=!1;for(let i=1;i<=e.state.doc.lines;i++)if(e.state.doc.line(i).text.trim().startsWith("```")&&(g=!g),i===d.number)return g;return!1};for(;(n=H.exec(p))!==null;){let r=a+((s=n.index)!=null?s:0),d=r+n[0].length;if(c>=r&&c<=d||y(r))continue;let{category:g="",label:i="",bgcolor:h="",fgcolor:C=""}=(u=n.groups)!=null?u:{},M=w(g),L=w(i),D=h&&m(h)?h:"",V=C&&m(C)?C:"",E=n[0].startsWith("((<");o.add(r,r+n[0].indexOf(i),f.Decoration.mark({class:"bn-hidden"})),o.add(r+n[0].indexOf(i),r+n[0].indexOf(i)+i.length,T(L,D,V,E)),o.add(r+n[0].indexOf(i)+i.length,d,f.Decoration.mark({class:"bn-hidden"}))}}return o.finish()}},{decorations:e=>e.decorations})}viewModeTagsHighlighter(){return(e,o)=>{Array.from(e.querySelectorAll("p, li, span, div")).forEach(s=>{var n;let u=s.textContent;if(!u)return;let a,l=s.innerHTML,p=!1;for(;(a=H.exec(u))!==null;){p=!0;let{label:y="",bgcolor:r="",fgcolor:d=""}=(n=a.groups)!=null?n:{},g=w(y),i=r&&m(r)?r:"",h=d&&m(d)?d:"",C=a[0].startsWith("((<"),M=T(g,i,h,C),L=`<span class="${M.spec.class}" style="${M.spec.attributes.style}">${g}</span>`,D=w(a[0]);l=l.replace(D,L)}p&&(s.innerHTML=l)})}}};

/* nosourcemap */